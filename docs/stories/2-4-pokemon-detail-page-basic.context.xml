<story-context id="2-4-pokemon-detail-page-basic" v="1.0">
  <metadata>
    <epicId>2</epicId>
    <storyId>4</storyId>
    <title>Pokemon Detail Page - Basic</title>
    <status>ready-for-dev</status>
    <generatedAt>2025-12-12</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/stories/2-4-pokemon-detail-page-basic.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>user</asA>
    <iWant>to see a Pokemon's basic information when I visit its detail page</iWant>
    <soThat>I can learn about that Pokemon's name, number, types, and physical characteristics</soThat>
    <tasks>
      <task id="1" name="Create PokemonDetail Component" acs="1,2,3">
        <subtask>Create src/components/pokemon/PokemonDetail.tsx</subtask>
        <subtask>Define PokemonDetailProps interface accepting IPokemon data</subtask>
        <subtask>Display Pokemon name prominently (capitalize first letter)</subtask>
        <subtask>Display Pokemon number with leading zeros (e.g., #025)</subtask>
        <subtask>Display official artwork from sprites.other['official-artwork'].front_default</subtask>
        <subtask>Display height (convert from decimeters to meters)</subtask>
        <subtask>Display weight (convert from hectograms to kilograms)</subtask>
      </task>
      <task id="2" name="Create TypeBadge Component" acs="1" status="ALREADY_EXISTS">
        <note>TypeBadge already exists at src/components/pokemon/TypeBadge.tsx - verify it meets requirements</note>
      </task>
      <task id="3" name="Update Pokemon Page with usePokemon Hook" acs="1,4,5">
        <subtask>Update src/pages/Pokemon.tsx to use usePokemon(id) hook</subtask>
        <subtask>Extract Pokemon ID from route params using useParams()</subtask>
        <subtask>Handle loading state with skeleton</subtask>
        <subtask>Handle error state (Pokemon not found) â†’ navigate to NotFound</subtask>
        <subtask>Pass Pokemon data to PokemonDetail component</subtask>
      </task>
      <task id="4" name="Create PokemonDetailSkeleton Component" acs="4">
        <subtask>Create src/components/pokemon/PokemonDetailSkeleton.tsx</subtask>
        <subtask>Match layout of PokemonDetail with animated skeleton placeholders</subtask>
        <subtask>Use Tailwind animate-pulse for loading effect</subtask>
      </task>
      <task id="5" name="Enhance NotFound Page for Invalid Pokemon" acs="5">
        <subtask>Ensure /pokemon/99999 (invalid ID) shows 404 page</subtask>
        <subtask>Add friendly message "Pokemon not found"</subtask>
        <subtask>Provide "Go Home" button</subtask>
        <note>NotFound page already exists - may just need error routing from Pokemon page</note>
      </task>
      <task id="6" name="Verify Implementation" acs="1,2,3,4,5">
        <subtask>Verify npm run build succeeds</subtask>
        <subtask>Verify TypeScript compilation (npx tsc --noEmit)</subtask>
        <subtask>Visual test: Navigate to /pokemon/25 - verify Pikachu displays correctly</subtask>
        <subtask>Visual test: Verify type badges show with correct colors</subtask>
        <subtask>Visual test: Loading skeleton appears during fetch</subtask>
        <subtask>Visual test: Invalid ID (e.g., /pokemon/99999) shows 404</subtask>
      </task>
    </tasks>
  </story>

  <acceptanceCriteria>
    <ac id="1">Navigating to /pokemon/25 displays Pikachu's name, number (#025), and types (AC15 from tech-spec)</ac>
    <ac id="2">Official artwork is prominently displayed (AC16 from tech-spec)</ac>
    <ac id="3">Height and weight are shown (AC17 from tech-spec)</ac>
    <ac id="4">Loading skeleton displays while fetching (AC18 from tech-spec)</ac>
    <ac id="5">Invalid Pokemon ID shows 404 page (AC19 from tech-spec)</ac>
  </acceptanceCriteria>

  <artifacts>
    <docs>
      <doc path="docs/tech-spec-epic-2.md" title="Epic 2 Technical Specification" section="Story 2.4: Pokemon Detail Page - Basic">
        AC15-AC19 define detailed requirements for this story including display format, loading states, and error handling.
      </doc>
      <doc path="docs/architecture.md" title="Architecture Document" section="Implementation Patterns">
        Defines component pattern (Props interface + functional component), hook pattern with TanStack Query, and naming conventions.
      </doc>
      <doc path="docs/architecture.md" title="Architecture Document" section="Data Architecture">
        IPokemon interface definition with id, name, height, weight, types, stats, sprites fields.
      </doc>
    </docs>
    <code>
      <file path="src/pages/Pokemon.tsx" kind="page" reason="MODIFY - Currently placeholder, needs usePokemon hook integration">
        <currentState>Placeholder page displaying ID from route params. Needs full implementation with usePokemon hook, PokemonDetail component, loading/error states.</currentState>
      </file>
      <file path="src/components/pokemon/TypeBadge.tsx" kind="component" reason="REUSE - Already implements type badges with colors">
        <interface>ITypeBadgeProps { type: string; className?: string }</interface>
        <note>Fully implemented with typeColorMap and dark/light text handling. No changes needed.</note>
      </file>
      <file path="src/components/pokemon/PokemonCard.tsx" kind="component" reason="REFERENCE - Contains formatPokemonNumber and capitalize utility functions">
        <utilities>formatPokemonNumber(id: number): string - formats as #XXX</utilities>
        <utilities>capitalize(str: string): string - capitalizes first letter</utilities>
        <note>Consider extracting utilities to lib/utils.ts for reuse in PokemonDetail</note>
      </file>
      <file path="src/hooks/usePokemon.ts" kind="hook" reason="USE - Fetch single Pokemon by ID">
        <interface>usePokemon(idOrName: string | number) returns { data: IPokemon, isLoading: boolean, error: Error | null }</interface>
      </file>
      <file path="src/types/pokemon.ts" kind="types" reason="USE - IPokemon interface definition">
        <interface>IPokemon { id, name, height, weight, types: IPokemonType[], stats, sprites: ISprites }</interface>
        <interface>ISprites { other: { 'official-artwork': { front_default: string | null } } }</interface>
      </file>
      <file path="src/pages/NotFound.tsx" kind="page" reason="REFERENCE - Existing 404 page to navigate to on error">
        <note>Already implemented with Card, return home button. Pokemon page should navigate here on fetch error.</note>
      </file>
      <file path="src/lib/api.ts" kind="service" reason="REFERENCE - API client throws Error on 404">
        <note>fetchPokemon throws 'Pokemon not found: {id}' on 404 status. Use this error in Pokemon page.</note>
      </file>
      <file path="tailwind.config.js" kind="config" reason="REFERENCE - Pokemon type colors defined">
        <note>colors.pokemon.{type} already defined for all 18 types. Used by TypeBadge.</note>
      </file>
    </code>
    <dependencies>
      <ecosystem name="node">
        <package name="react" version="^18.3.1" />
        <package name="react-dom" version="^18.3.1" />
        <package name="react-router-dom" version="^7.10.1" />
        <package name="@tanstack/react-query" version="^5.90.12" />
        <package name="tailwindcss" version="^3.4.19" />
        <package name="lucide-react" version="^0.561.0" />
        <package name="class-variance-authority" version="^0.7.1" />
        <package name="clsx" version="^2.1.1" />
        <package name="tailwind-merge" version="^3.4.0" />
        <package name="tailwindcss-animate" version="^1.0.7" />
      </ecosystem>
    </dependencies>
  </artifacts>

  <interfaces>
    <interface name="usePokemon" kind="hook" path="src/hooks/usePokemon.ts">
      <signature>usePokemon(idOrName: string | number): UseQueryResult&lt;IPokemon, Error&gt;</signature>
      <returns>{ data: IPokemon | undefined, isLoading: boolean, error: Error | null, refetch }</returns>
    </interface>
    <interface name="IPokemon" kind="type" path="src/types/pokemon.ts">
      <signature>{ id: number, name: string, height: number, weight: number, types: IPokemonType[], stats: IPokemonStat[], sprites: ISprites }</signature>
    </interface>
    <interface name="useParams" kind="hook" path="react-router-dom">
      <signature>useParams&lt;{ id: string }&gt;(): { id: string | undefined }</signature>
    </interface>
    <interface name="useNavigate" kind="hook" path="react-router-dom">
      <signature>useNavigate(): (to: string) => void</signature>
      <note>Use for navigating to NotFound on error</note>
    </interface>
  </interfaces>

  <constraints>
    <constraint source="architecture">Component pattern: Define Props interface, export functional component</constraint>
    <constraint source="architecture">Use @/ path alias for imports</constraint>
    <constraint source="architecture">Use Tailwind utilities, avoid custom CSS</constraint>
    <constraint source="architecture">Use cn() utility for conditional classes</constraint>
    <constraint source="tech-spec">Pokemon number format: #XXX with leading zeros (e.g., #025)</constraint>
    <constraint source="tech-spec">Height conversion: decimeters to meters (divide by 10)</constraint>
    <constraint source="tech-spec">Weight conversion: hectograms to kilograms (divide by 10)</constraint>
    <constraint source="tech-spec">Use official artwork from sprites.other['official-artwork'].front_default</constraint>
    <constraint source="naming">Components: PascalCase (e.g., PokemonDetail.tsx)</constraint>
    <constraint source="naming">Interfaces: PascalCase with I prefix (e.g., IPokemonDetailProps)</constraint>
  </constraints>

  <tests>
    <standards>
      No test framework configured yet. Focus on visual testing through dev server and build verification.
      Verify TypeScript compilation with npx tsc --noEmit. Verify build with npm run build.
    </standards>
    <locations>
      <location>tests/components/ (future)</location>
      <location>tests/hooks/ (future)</location>
    </locations>
    <ideas>
      <idea ac="1">Visual: Navigate to /pokemon/25, verify Pikachu name, #025, electric type badge displayed</idea>
      <idea ac="2">Visual: Verify official artwork image is large and centered</idea>
      <idea ac="3">Visual: Verify height (0.4 m) and weight (6.0 kg) displayed for Pikachu</idea>
      <idea ac="4">Visual: Slow network throttle, verify skeleton appears before data loads</idea>
      <idea ac="5">Visual: Navigate to /pokemon/99999, verify 404 page shown</idea>
    </ideas>
  </tests>
</story-context>
